"use strict";function showCart(){$.ajax({url:"../php/interface/showlist.php",dataType:"json",success:function(t){$("ul").html(""),$.each(t.data,function(t,n){$("ul").append('\n                <li>\n                    <table>\n                        <thead>\n                            <td>商品图片</td>\n                            <td>商品id</td>\n                            <td>商品名</td>\n                            <td>商品单价</td>\n                            <td>商品数量</td>\n                            <td>商品总价</td>\n                            <td>结算</td>\n                            <td>删除此商品</td>\n                        </thead>\n                        <tbody>\n                            <tr>\n                                <td><img src="'.concat(n.product_img,'" alt=""></img></td>\n                                <td>').concat(n.product_id,"</td>\n                                <td>").concat(n.product_name,"</td>\n                                <td>").concat(n.product_price,'</td>\n                                <td><button class="addNum">+</button><span>').concat(n.product_num,'</span><button class="cutNum">-</button></td>\n                                <td>').concat(n.product_price*n.product_num,'</td>\n                                <td>\n                                    <input type="checkbox" class="checked">\n                                </td>\n                                <td>\n                                    <input type="button" value="删除">\n                                </td>\n                            </tr>\n                        </tbody>\n\n                    </table>\n\n                </li>\n                '))})}})}function Check(){$("ul").on("click",function(){for(var t=0,n=0;n<$("ul").children().size();n++){console.log($("ul").children().eq(n).children().eq(0));var c=$("ul").children().eq(n).children().children().eq(1).children().children().eq(6).children().prop("checked");t+=parseInt($("ul").children().eq(n).children().children().eq(1).children().children().eq(5).html())*c}$(".payment").children().eq(0).children().eq(0).html(t),console.log(t),console.log($(this).prop("checked"))})}$("h2").html("欢迎你"+localStorage.getItem("un")),$(".showCart").click(function(){showCart()}),$("ul").on("click",".delProduct",function(){var t=$(this).parent().parent().children().eq(1).html();$.ajax({url:"../php/interface/delwq.php",dataType:"json",data:{id:t},success:function(t){t.code&&showCart()}})}),$("ul").on("click",".addNum",function(){var t=$(this).parent().parent().children().eq(1).html(),n=$(this);$.ajax({url:"../php/interface/updatewq.php",dataType:"json",data:{type:"add",id:t},success:function(t){t.code&&(n.next().html(t.data.product_num),n.parent().next().html(t.data.product_price*t.data.product_num))}})}),$("ul").on("click",".cutNum",function(){var t=$(this).parent().parent().children().eq(1).html(),n=$(this);$.ajax({url:"../php/interface/updatewq.php",dataType:"json",data:{type:"",id:t},success:function(t){t.code&&(n.prev().html(t.data.product_num),n.parent().next().html(t.data.product_price*t.data.product_num))}})}),Check();